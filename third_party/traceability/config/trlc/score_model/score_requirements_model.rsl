/********************************************************************************
 * Copyright (c) 2025 Contributors to the Eclipse Foundation
 *
 * See the NOTICE file(s) distributed with this work for additional
 * information regarding copyright ownership.
 *
 * This program and the accompanying materials are made available under the
 * terms of the Apache License Version 2.0 which is available at
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * SPDX-License-Identifier: Apache-2.0
 ********************************************************************************/
package ScoreReq

enum Asil {
    QM
    B
    D
}

enum Status {
    valid
    invalid
}

abstract type Requirement {
    description				String
    version                 Integer
	safety                  Asil
    note optional           String
    status                  Status
    freeze status =         Status.valid
}

tuple ReqId {
    item                     Requirement
    separator                @
    version                  Integer
}

type AssumedSystemReq extends Requirement {
    rationale				String
}

tuple AssumedSystemReqId {
    item                     AssumedSystemReq
    separator                @
    version                  Integer
}

type FeatReq extends Requirement {
    derived_from			AssumedSystemReqId[1 .. *]
}

tuple FeatReqId {
    item                     FeatReq
    separator                @
    version                  Integer
}

type CompReq extends Requirement {
    derived_from		    FeatReqId[1 .. *]
    fulfilledBy optional    String
}

type Component extends Requirement {

}

abstract type StdReq extends Requirement {
}

checks Requirement {

    not matches(description, "(shall|should)"),
        warning "The description must include (shall|should)",
	    description

}

checks AssumedSystemReq {

    rationale != null implies len(rationale) >= 5, "rationale too short"

}
